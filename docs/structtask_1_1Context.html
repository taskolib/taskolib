<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Taskolib: task::Context Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Taskolib
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetask.html">task</a></li><li class="navelem"><a class="el" href="structtask_1_1Context.html">Context</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structtask_1_1Context-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">task::Context Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A context stores information that influences the execution of steps and sequences, namely: </p>
<ul>
<li>A list of variables that can be im-/exported into steps.</li>
<li>An initialization function (in C++) that is called on a Lua state before a step is executed.</li>
<li>A step setup script (in Lua) that is executed before a step is executed. Global variables and functions defined in this step setup script can be accessed by the Lua script in the step. When a sequence is executed, this step setup script is overwritten with the one from the sequence.</li>
<li>A callback that is invoked whenever a message is being processed by the execution engine (see below for details).</li>
</ul>
<h3><a class="el" href="classtask_1_1Message.html" title="A message carrying some text, a timestamp, and a type, to be transported with a message queue between...">Message</a> callback function</h3>
<p>The <a class="el" href="structtask_1_1Context.html" title="A context stores information that influences the execution of steps and sequences,...">Context</a> contains a message_callback_function that is called once for each message that is being processed by the execution engine in the main thread. By default, this function will send the output of the Lua "print()" command and error messages to stdout (see <a class="el" href="namespacetask.html#a6421ad950ed1b80aaa83d75862c30fb7" title="Default callback function for messages.">default_message_callback()</a>). However, message_callback_function can also be set to nullptr (to disable any special behavior) or to a custom function: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> my_message_callback(<span class="keyword">const</span> Message&amp; msg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (msg.get_type() == <a class="code" href="classtask_1_1Message.html#a4815e8e0b100ea8f309a03856ad81cd4a78e6221f6393d1356681db398f14ce6d">Message::Type::output</a>)</div>
<div class="line">        send_to_console(msg.get_text());</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.get_type() == <a class="code" href="classtask_1_1Message.html#a4815e8e0b100ea8f309a03856ad81cd4a995d1c2c9ad87d7934c959bf053c2ea5">Message::Type::sequence_stopped_with_error</a>)</div>
<div class="line">        show_alert_box(msg.get_text());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">Context context;</div>
<div class="line">context.message_callback_function = my_message_callback;</div>
<div class="ttc" id="aclasstask_1_1Message_html_a4815e8e0b100ea8f309a03856ad81cd4a78e6221f6393d1356681db398f14ce6d"><div class="ttname"><a href="classtask_1_1Message.html#a4815e8e0b100ea8f309a03856ad81cd4a78e6221f6393d1356681db398f14ce6d">task::Message::Type::output</a></div><div class="ttdeci">@ output</div><div class="ttdoc">a message string that was output by a step via print()</div></div>
<div class="ttc" id="aclasstask_1_1Message_html_a4815e8e0b100ea8f309a03856ad81cd4a995d1c2c9ad87d7934c959bf053c2ea5"><div class="ttname"><a href="classtask_1_1Message.html#a4815e8e0b100ea8f309a03856ad81cd4a995d1c2c9ad87d7934c959bf053c2ea5">task::Message::Type::sequence_stopped_with_error</a></div><div class="ttdeci">@ sequence_stopped_with_error</div><div class="ttdoc">a sequence has been stopped because of an error</div></div>
</div><!-- fragment --><p> The callback function receives a reference to the message that is being processed. If a sequence is executed in the current thread (e.g. via <a class="el" href="classtask_1_1Sequence.html#a019e0ac09e305029bce032a1b983fd55" title="Execute the sequence (or just one of its steps) within a given context.">Sequence::execute()</a>), the callback is executed whenever a message is generated. If the sequence is handed to an <a class="el" href="classtask_1_1Executor.html" title="An executor runs a copy of a given Sequence (or just a single step within it) in a separate thread,...">Executor</a> for parallel execution, the callback is run whenever the main thread has received the message (i.e. typically within <a class="el" href="classtask_1_1Executor.html#ab80e82198ae3f014a91b82d8ac1376ef" title="Update the local copy of the sequence from messages that have arrived from the execution thread.">Executor::update()</a>). Callbacks are never executed on the worker thread. </p>
</div>
<p><code>#include &lt;<a class="el" href="Context_8h_source.html">Context.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a86fd00d26d28714257ad8f4b0e5fe0a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetask.html#af3e14e35aad905c621373efc1a722679">VariableTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtask_1_1Context.html#a86fd00d26d28714257ad8f4b0e5fe0a3">variables</a></td></tr>
<tr class="memdesc:a86fd00d26d28714257ad8f4b0e5fe0a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of variables (names and values) that can be im-/exported into steps.  <a href="structtask_1_1Context.html#a86fd00d26d28714257ad8f4b0e5fe0a3">More...</a><br /></td></tr>
<tr class="separator:a86fd00d26d28714257ad8f4b0e5fe0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da357f420f72276a99d89767c0e907c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtask_1_1Context.html#a5da357f420f72276a99d89767c0e907c">step_setup_script</a> = &quot;&quot;</td></tr>
<tr class="memdesc:a5da357f420f72276a99d89767c0e907c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtask_1_1Step.html" title="A step is the main building block of a sequence.">Step</a> setup script with common functions or constants like a small library.  <a href="structtask_1_1Context.html#a5da357f420f72276a99d89767c0e907c">More...</a><br /></td></tr>
<tr class="separator:a5da357f420f72276a99d89767c0e907c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf1fe7546f0a81a0ae43f666a0fefea"><td class="memItemLeft" align="right" valign="top">std::function&lt; void(sol::state &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtask_1_1Context.html#a3bf1fe7546f0a81a0ae43f666a0fefea">step_setup_function</a></td></tr>
<tr class="memdesc:a3bf1fe7546f0a81a0ae43f666a0fefea"><td class="mdescLeft">&#160;</td><td class="mdescRight">An initialization function that is called on a Lua state before a step is executed.  <a href="structtask_1_1Context.html#a3bf1fe7546f0a81a0ae43f666a0fefea">More...</a><br /></td></tr>
<tr class="separator:a3bf1fe7546f0a81a0ae43f666a0fefea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427411724ef16e9f4402f6e6961b5a56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetask.html#a6a925d38472ee434739fcf16e7cf27b6">MessageCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtask_1_1Context.html#a427411724ef16e9f4402f6e6961b5a56">message_callback_function</a> = <a class="el" href="namespacetask.html#a6421ad950ed1b80aaa83d75862c30fb7">default_message_callback</a></td></tr>
<tr class="memdesc:a427411724ef16e9f4402f6e6961b5a56"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback (or "hook") function that is invoked whenever a message is processed during the execution of a sequence.  <a href="structtask_1_1Context.html#a427411724ef16e9f4402f6e6961b5a56">More...</a><br /></td></tr>
<tr class="separator:a427411724ef16e9f4402f6e6961b5a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a427411724ef16e9f4402f6e6961b5a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427411724ef16e9f4402f6e6961b5a56">&#9670;&nbsp;</a></span>message_callback_function</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetask.html#a6a925d38472ee434739fcf16e7cf27b6">MessageCallback</a> task::Context::message_callback_function = <a class="el" href="namespacetask.html#a6421ad950ed1b80aaa83d75862c30fb7">default_message_callback</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A callback (or "hook") function that is invoked whenever a message is processed during the execution of a sequence. </p>

<p class="reference">Referenced by <a class="el" href="classtask_1_1Executor.html#ab24061adfe403a7eabfda8caa27a9871">task::Executor::launch_async_execution()</a>, <a class="el" href="namespacetask.html#aa3297d57e5d2ff3b328beb5d94910f4c">task::send_message()</a>, and <a class="el" href="classtask_1_1Executor.html#ab80e82198ae3f014a91b82d8ac1376ef">task::Executor::update()</a>.</p>

</div>
</div>
<a id="a3bf1fe7546f0a81a0ae43f666a0fefea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bf1fe7546f0a81a0ae43f666a0fefea">&#9670;&nbsp;</a></span>step_setup_function</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;void(sol::state&amp;)&gt; task::Context::step_setup_function</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An initialization function that is called on a Lua state before a step is executed. </p>

<p class="reference">Referenced by <a class="el" href="classtask_1_1Step.html#a126879f0acf150f43a8e0f115cfcd263">task::Step::execute_impl()</a>.</p>

</div>
</div>
<a id="a5da357f420f72276a99d89767c0e907c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5da357f420f72276a99d89767c0e907c">&#9670;&nbsp;</a></span>step_setup_script</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string task::Context::step_setup_script = &quot;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classtask_1_1Step.html" title="A step is the main building block of a sequence.">Step</a> setup script with common functions or constants like a small library. </p>
<p>Overwritten when a sequence is started. </p>

<p class="reference">Referenced by <a class="el" href="classtask_1_1Step.html#a126879f0acf150f43a8e0f115cfcd263">task::Step::execute_impl()</a>, and <a class="el" href="classtask_1_1Sequence.html#a7a1122dafe2e31be1d1b903584ad3fa9">task::Sequence::handle_execution()</a>.</p>

</div>
</div>
<a id="a86fd00d26d28714257ad8f4b0e5fe0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86fd00d26d28714257ad8f4b0e5fe0a3">&#9670;&nbsp;</a></span>variables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetask.html#af3e14e35aad905c621373efc1a722679">VariableTable</a> task::Context::variables</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A map of variables (names and values) that can be im-/exported into steps. </p>

<p class="reference">Referenced by <a class="el" href="classtask_1_1Executor.html#a578bcd803247fd8d101b7276e6e7e2e8">task::Executor::cancel()</a>, <a class="el" href="classtask_1_1Step.html#a7b6c9eb3ad90efaef0ccb08e9bf1a7a7">task::Step::copy_used_variables_from_context_to_lua()</a>, <a class="el" href="classtask_1_1Step.html#a8fe26c7928e9aa6bac5b99c009cdcab1">task::Step::copy_used_variables_from_lua_to_context()</a>, <a class="el" href="classtask_1_1Executor.html#ad19328988ebba9537be4e86c460b8aaf">task::Executor::get_context_variables()</a>, and <a class="el" href="classtask_1_1Executor.html#a175cd06097d2c48d6875778195da2d5e">task::Executor::is_busy()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="Context_8h_source.html">Context.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 13 2024 15:45:21 for Taskolib by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
